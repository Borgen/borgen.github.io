<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Calling Home | Okan's</title><meta name=keywords content><meta name=description content="Too Long, Didn&rsquo;t Read: I use a simple app to connect to my home network from anywhere in the world.
As you buy little gadgets that connect to internet, you begin to realize the need, the need for spee&mldr; ehm, no, the need for connecting to your home network. Nowadays your gadget also comes with its software which enables you to control it from a mobile app or their website or something so you don&rsquo;t worry about anything."><meta name=author content><link rel=canonical href=https://okankonur.com/posts/callhome/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><link rel=preload href=/apple-touch-icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://okankonur.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://okankonur.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://okankonur.com/favicon-32x32.png><link rel=apple-touch-icon href=https://okankonur.com/apple-touch-icon.png><link rel=mask-icon href=https://okankonur.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Calling Home"><meta property="og:description" content="Too Long, Didn&rsquo;t Read: I use a simple app to connect to my home network from anywhere in the world.
As you buy little gadgets that connect to internet, you begin to realize the need, the need for spee&mldr; ehm, no, the need for connecting to your home network. Nowadays your gadget also comes with its software which enables you to control it from a mobile app or their website or something so you don&rsquo;t worry about anything."><meta property="og:type" content="article"><meta property="og:url" content="https://okankonur.com/posts/callhome/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-12T16:15:03+03:00"><meta property="article:modified_time" content="2022-06-12T16:15:03+03:00"><meta property="og:site_name" content="Okan's"><meta name=twitter:card content="summary"><meta name=twitter:title content="Calling Home"><meta name=twitter:description content="Too Long, Didn&rsquo;t Read: I use a simple app to connect to my home network from anywhere in the world.
As you buy little gadgets that connect to internet, you begin to realize the need, the need for spee&mldr; ehm, no, the need for connecting to your home network. Nowadays your gadget also comes with its software which enables you to control it from a mobile app or their website or something so you don&rsquo;t worry about anything."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://okankonur.com/posts/"},{"@type":"ListItem","position":2,"name":"Calling Home","item":"https://okankonur.com/posts/callhome/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Calling Home","name":"Calling Home","description":"Too Long, Didn\u0026rsquo;t Read: I use a simple app to connect to my home network from anywhere in the world.\nAs you buy little gadgets that connect to internet, you begin to realize the need, the need for spee\u0026hellip; ehm, no, the need for connecting to your home network. Nowadays your gadget also comes with its software which enables you to control it from a mobile app or their website or something so you don\u0026rsquo;t worry about anything.","keywords":[],"articleBody":"Too Long, Didn’t Read: I use a simple app to connect to my home network from anywhere in the world.\nAs you buy little gadgets that connect to internet, you begin to realize the need, the need for spee… ehm, no, the need for connecting to your home network. Nowadays your gadget also comes with its software which enables you to control it from a mobile app or their website or something so you don’t worry about anything. But how does that work? How can you see what your device is doing at home? Isn’t it supposed to be a isolated network with firewalls to prevent strangers from accessing it?\nIt is. Usually there is no way for anyone to send a request to your external IP and get a response. All the inbound ports of your home network is closed as default. Your router’s default firewall should prevent this. No stranger can start a communication. However they can respond to a communication which is started by you. If the firewall hadn’t been allowing these responses, you wouldn’t have been reading this.\nEquipment used by E.T. to call home\nThat’s why in the olden days, you needed to forward a port (meaning, to open it to external world). You see why this is insecure. Anyone that know or stumble upon your public IP can scan and send requests to your open port. If you run anything vulnerable behind that port, you are in trouble.\nWhat to do? You can use a VPN service. You may have heard of Hamachi. Many years ago (before the age of Steam) we were using it to play multiplayer games without port forwarding. It was easy to use and it simulated a LAN. So we just started it up, connected to it and shared our local server. At that time it felt like magic.\nGreat software built alike I, like everyone else, love a software that:\nhas one basic job does it perfectly (fast, no need for extensive configuration) intuitive (no need for devops skills) lightweight no shady ads Last year I felt this elusive feeling of magic again. It was Tailscale. Built on open source VPN backbone Wireguard, it was simple to set up. Worked out of the box on all of my devices, including a raspberry pi, a Windows PC and iOS.\nWhat is it for? It lets you create your own VPN. Most useful thing about this is, you can connect devices to this VPN and just do what you gotta do like you never left home. Nobody can interfere with your IP packets because they are end-to-end encrypted in every step of the journey peer-to-peer.\nThe warm feeling of “open-source” You may be asking “so you are going to just trust this?” I may be answering, you gotta trust something in the end. Or you can investigate the open source repo of wireguard and key generation steps of tailscale. I didn’t. That’s how much I trust “open-source” buzzword. Heh, heh…\nSmart home apps? Do you really need this? If you have those apps I mentioned, the ones that come with the product you bought, you don’t really need to set up something to connect home. They act as a control center between the actual home device and your client (mobile phone or pc). Both of these devices send requests to the centralized control center server and it relays the information. I don’t think these services focus on the encryption side of things. Sure, the traffic may flow through SSL, however, some company personnel can configure your account so that next time your home device polls for some command to execute, it will execute a command you did not put there. There is no guarantee if there is no end-to-end encryption between you and the target device at home.\nOn the other hand, if you are self hosting some projects from your home, that means you don’t have any commercial middleware apps or servers for your custom projects. So you need to connect directly.\nOK but how does Tailscale differ? Tailscale also have a control center layer that they call “control plane”. This greatly simplifies things in terms of key exchange. The difference from commercial apps is, traffic is encrypted and it is not routed over their servers (if you have a UDP port open and allow direct connection), you connect directly to your target. But it also works without port forwarding, thanks to Tailscale’s NAT traversal. Even if you have dynamic IP and no open ports.\nIn summary, you have two options regarding port forwarding with tailscale:\nForward an UDP port to directly (real-undiluted p2p) connect to your home. Difference from forwarding your 443 port and connecting via TLS is, you don’t need to boot up a TLS compatible web application server behind your port. The traffic will be encrypted over Wireguard. Leave your firewall as is. Trust the relay servers of tailscale. I do this. I trust the relay server because Man in the Middle attacks are prevented via Wireguard by default. And I don’t see any noticable performance bottleneck. Wireguard works with asymmetric encryption. It must have private-public key pairs for each device on the network. The public keys must be known for each device. Devices create the private one locally without telling anyone. But the corresponding public key is sent to the server where it is listed for anyone else on the same account’s network ip list to see.\nTailscale assigns internal IPs for each device. If your local tailscale app is active, you can connect to these ip addresses and the traffic will be end-to-end encrypted. If any of these devices allows access to their UDP ports, connection will be peer-to-peer. If not, tailscale will use their relay servers.\nTailscale Internal IP List\nAll in all, I am very satisfied with this setup and wanted to give my thanks to Tailscale by writing about it.\n","wordCount":"988","inLanguage":"en","datePublished":"2022-06-12T16:15:03+03:00","dateModified":"2022-06-12T16:15:03+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://okankonur.com/posts/callhome/"},"publisher":{"@type":"Organization","name":"Okan's","logo":{"@type":"ImageObject","url":"https://okankonur.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://okankonur.com/ accesskey=h title="Home (Alt + H)"><img src=https://okankonur.com/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://okankonur.com/archives/ title=archives><span>archives</span></a></li><li><a href=https://okankonur.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://okankonur.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://okankonur.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://okankonur.com/about/me title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://okankonur.com/>Home</a>&nbsp;»&nbsp;<a href=https://okankonur.com/posts/>Posts</a></div><h1 class=post-title>Calling Home</h1><div class=post-meta><span title='2022-06-12 16:15:03 +0300 +03'>June 12, 2022</span>&nbsp;·&nbsp;5 min</div></header><div class=post-content><p><em><strong>Too Long, Didn&rsquo;t Read:</strong></em> I use a simple app to connect to my home network from anywhere in the world.</p><p>As you buy little gadgets that connect to internet, you begin to realize the need, the need for <em>spee&mldr;</em> ehm, no, the need for connecting to your home network. Nowadays your gadget also comes with its software which enables you to control it from a mobile app or their website or something so you don&rsquo;t worry about anything. But how does that work? How can you see what your device is doing at home? Isn&rsquo;t it supposed to be a isolated network with firewalls to prevent strangers from accessing it?</p><p>It is. Usually there is no way for anyone to send a request to your external IP and get a response. All the inbound ports of your home network is closed as default. Your router&rsquo;s default firewall should prevent this. No stranger can <strong>start</strong> a communication. However they can <em>respond</em> to a communication which is started by you. If the firewall hadn&rsquo;t been allowing these responses, you wouldn&rsquo;t have been reading this.</p><figure class=align-center><img loading=lazy src=/pics/et-call-home.png#center alt="Equipment used by E.T. to call home"><figcaption><p>Equipment used by E.T. to call home</p></figcaption></figure><p>That&rsquo;s why in the olden days, you needed to forward a port (meaning, to open it to external world). You see why this is insecure. Anyone that know or stumble upon your public IP can scan and send requests to your open port. If you run anything vulnerable behind that port, you are in trouble.</p><p>What to do? You can use a VPN service. You may have heard of <em>Hamachi</em>. Many years ago (before the age of Steam) we were using it to play multiplayer games without port forwarding. It was easy to use and it simulated a LAN. So we just started it up, connected to it and shared our local server. At that time it felt like magic.</p><h3 id=great-software-built-alike>Great software built alike<a hidden class=anchor aria-hidden=true href=#great-software-built-alike>#</a></h3><p>I, like everyone else, love a software that:</p><ul><li>has one basic job</li><li>does it perfectly (fast, no need for extensive configuration)</li><li>intuitive (no need for devops skills)</li><li>lightweight</li><li>no shady ads</li></ul><p>Last year I felt this elusive feeling of magic again. It was <a href=https://tailscale.com/>Tailscale</a>. Built on open source VPN backbone <a href=https://www.wireguard.com/>Wireguard</a>, it was simple to set up. Worked out of the box on all of my devices, including a raspberry pi, a Windows PC and iOS.</p><p>What is it for? It lets you create your own VPN. Most useful thing about this is, you can connect devices to this VPN and just do what you gotta do like you never left home. Nobody can interfere with your IP packets because they are end-to-end encrypted in every step of the journey peer-to-peer.</p><h3 id=the-warm-feeling-of-open-source>The warm feeling of <em>&ldquo;open-source&rdquo;</em><a hidden class=anchor aria-hidden=true href=#the-warm-feeling-of-open-source>#</a></h3><p>You may be asking &ldquo;so you are going to just trust this?&rdquo; I may be answering, you gotta trust something in the end. Or you can investigate the open source repo of wireguard and key generation steps of tailscale. I didn&rsquo;t. That&rsquo;s how much I trust &ldquo;open-source&rdquo; buzzword. Heh, <em>heh&mldr;</em></p><h3 id=smart-home-apps>Smart home apps?<a hidden class=anchor aria-hidden=true href=#smart-home-apps>#</a></h3><p>Do you really need this? If you have those apps I mentioned, the ones that come with the product you bought, you don&rsquo;t really <em>need</em> to set up something to connect home. They act as a control center between the actual home device and your client (mobile phone or pc). Both of these devices send requests to the centralized control center server and it relays the information. I don&rsquo;t think these services focus on the encryption side of things. Sure, the traffic may flow through SSL, however, some company personnel can configure your account so that next time your home device polls for some command to execute, it will execute a command you did not put there. There is no guarantee if there is no end-to-end encryption between you and the target device at home.</p><p>On the other hand, if you are <a href=https://okankonur.com/posts/selfhost/>self hosting</a> some projects from your home, that means you don&rsquo;t have any commercial middleware apps or servers for your custom projects. So you need to connect directly.</p><h3 id=ok-but-how-does-tailscale-differ>OK but how does Tailscale differ?<a hidden class=anchor aria-hidden=true href=#ok-but-how-does-tailscale-differ>#</a></h3><p>Tailscale also have a control center layer that they call &ldquo;control plane&rdquo;. This greatly simplifies things in terms of key exchange. The difference from commercial apps is, traffic is encrypted and it is not routed over their servers (if you have a UDP port open and allow direct connection), you connect directly to your target. But it also works without port forwarding, thanks to Tailscale&rsquo;s <a href=https://tailscale.com/blog/how-nat-traversal-works/>NAT traversal</a>. Even if you have dynamic IP and no open ports.</p><p>In summary, you have two options regarding port forwarding with tailscale:</p><ol><li>Forward an UDP port to directly (real-undiluted p2p) connect to your home.<ul><li>Difference from forwarding your 443 port and connecting via TLS is, you don&rsquo;t need to boot up a TLS compatible web application server behind your port. The traffic will be encrypted over Wireguard.</li></ul></li><li>Leave your firewall as is. Trust the relay servers of tailscale.<ul><li>I do this. I trust the relay server because Man in the Middle attacks are prevented via Wireguard by default. And I don&rsquo;t see any noticable performance bottleneck.</li></ul></li></ol><p>Wireguard works with asymmetric encryption. It must have private-public key pairs for <strong>each</strong> device on the network. The public keys must be known for each device. Devices create the private one locally without telling anyone. But the corresponding public key is sent to the server where it is listed for anyone else on the same account&rsquo;s network ip list to see.</p><p>Tailscale assigns internal IPs for each device. If your local tailscale app is active, you can connect to these ip addresses and the traffic will be end-to-end encrypted. If any of these devices allows access to their UDP ports, connection will be peer-to-peer. If not, tailscale will use their relay servers.</p><figure class=align-center><img loading=lazy src=/pics/tailscale-ip.png#center alt="Tailscale Internal IP List"><figcaption><p>Tailscale Internal IP List</p></figcaption></figure><p>All in all, I am very satisfied with this setup and wanted to give my thanks to Tailscale by writing about it.</p></div><footer class=post-footer><nav class=paginav><a class=next href=https://okankonur.com/posts/selfhost/><span class=title>Next Page »</span><br><span>Hosting Open Source Projects At Home</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://okankonur.com/>Okan's</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement('button');e.classList.add('copy-code'),e.innerText='copy';function s(){e.innerText='copied!',setTimeout(()=>{e.innerText='copy'},2e3)}e.addEventListener('click',o=>{if('clipboard'in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand('copy'),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>