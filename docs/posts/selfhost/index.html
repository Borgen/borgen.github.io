<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Hosting Open Source Projects At Home | Okan's</title>
<meta name=keywords content>
<meta name=description content="Table of Contents  Table of Contents  Why How  Booting Up Raspberry PI We need to CONTAIN them!   Projects to Host  Docker Management Interface Keeping Your System Up To Date Manage Your Passwords Block Ads Even Before They Reach Your Home Network Your Own Projects     What Now?  Why So, why would you ever need to host anything at home? We live in the age of cloud computing.">
<meta name=author content>
<link rel=canonical href=https://okankonur.com/posts/selfhost/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://okankonur.com/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://okankonur.com/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://okankonur.com/favicon-32x32.png>
<link rel=apple-touch-icon href=https://okankonur.com/apple-touch-icon.png>
<link rel=mask-icon href=https://okankonur.com/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Hosting Open Source Projects At Home">
<meta property="og:description" content="Table of Contents  Table of Contents  Why How  Booting Up Raspberry PI We need to CONTAIN them!   Projects to Host  Docker Management Interface Keeping Your System Up To Date Manage Your Passwords Block Ads Even Before They Reach Your Home Network Your Own Projects     What Now?  Why So, why would you ever need to host anything at home? We live in the age of cloud computing.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://okankonur.com/posts/selfhost/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-06-02T20:46:30+03:00">
<meta property="article:modified_time" content="2022-06-02T20:46:30+03:00"><meta property="og:site_name" content="Okan's">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Hosting Open Source Projects At Home">
<meta name=twitter:description content="Table of Contents  Table of Contents  Why How  Booting Up Raspberry PI We need to CONTAIN them!   Projects to Host  Docker Management Interface Keeping Your System Up To Date Manage Your Passwords Block Ads Even Before They Reach Your Home Network Your Own Projects     What Now?  Why So, why would you ever need to host anything at home? We live in the age of cloud computing.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://okankonur.com/posts/"},{"@type":"ListItem","position":2,"name":"Hosting Open Source Projects At Home","item":"https://okankonur.com/posts/selfhost/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hosting Open Source Projects At Home","name":"Hosting Open Source Projects At Home","description":"Table of Contents  Table of Contents  Why How  Booting Up Raspberry PI We need to CONTAIN them!   Projects to Host  Docker Management Interface Keeping Your System Up To Date Manage Your Passwords Block Ads Even Before They Reach Your Home Network Your Own Projects     What Now?  Why So, why would you ever need to host anything at home? We live in the age of cloud computing.","keywords":[],"articleBody":"Table of Contents  Table of Contents  Why How  Booting Up Raspberry PI We need to CONTAIN them!   Projects to Host  Docker Management Interface Keeping Your System Up To Date Manage Your Passwords Block Ads Even Before They Reach Your Home Network Your Own Projects     What Now?  Why So, why would you ever need to host anything at home? We live in the age of cloud computing. You can sign up with any mainstream provider and have all the functionality of the services we are going to talk about, without all the configuration hassle.\nThere are three main reasons for me. First and foremost, it is fun. Configuring and setting up a home server that works fluidly without needing much maintanence is satisfying. If this sounds ridiculous to you, other reasons aren’t important. It comes down to personal preference. Cloud is OK.\nThis brings us to the second reason. Where cloud may not be OK.\nPrivacy. We all know that our data is already spilled out there. No matter how much you try, if you are benefiting from FAANG services, they own and sell your data. It may be an acceptable trade in exchange of the services they provide. I am OK with that. However, if you are not, self hosting is also for you.\nThirdly, there are some projects that help you administer your internal home network. For example you can set up an intermediary DNS and block ads on all of the devices connected to your WiFi without any browser extension or adblock installment. You can’t easily do this with any of the cloud services.\nHow First thing to get is an old pc which is lying around. Or better, a raspberry pi… or better, a rpi cluster!\nRaspberry PI is the most efficient way to go in my opinion. It is:\n cheap tiny (you can stick it to your wall) low power usage (consumes 1W on average - I have model 3b) has everything you need to get started  \rPower Usage With 6 Containers Running\n\r\rBooting Up Raspberry PI  First, flash an OS.  Easiest and most compatible is the Raspberry Pi OS. I recommend 64-bit version because some docker images are only compatible with it. Find the list here I have the desktop version but you don’t necessarily need it. Download and follow the instructions on the Raspberry Pi Imager. SSH and WiFi configuration step is important in the imager. We will connect with SSH.   Connect to your server.  If you flashed and set up wifi and ssh properties successfully, you can now connect to you pi from any other pc on your home network. Find your pi’s assigned IP. You can get this info from your router’s interface. (e.g: 192.168.1.1 or something like that) open up your terminal and connect through ssh: ssh pi@. For example: ssh pi@192.168.1.105 Recommended if you are using Windows on PC: Install WinSCP for transferring files to your pi. It will come in handy.    We need to CONTAIN them! If you are hosting more than one project with different infrastructures, docker saves the day. Best thing about these open source project developers are that they also release their docker images. You don’t even need to build the image nowadays. Just downloading from the hub and slapping some parameters makes it ready to go.\n$ sudo apt-get update \u0026\u0026 sudo apt-get upgrade\n$ curl -fsSL https://get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh\nNow we are ready to download and run some projects which are built for self-hosting!\nNote: If you are using a pi with 64 bit os, choose linux-arm64 among the container image versions.\nMy current running project list is:\n Portainer: Manage your docker ecosystem with a web interface. This is a must imho. Watchtower: Automatically update your docker images to the latest version from the hub. Bitwarden: Best password manager out there. Pihole: DNS Ad-Blocker for your home network. My Side Projects:  Custom Discord bot. Simple ethereum low gas price e-mail notifier.    Let’s look into how we can set up most of them.\nProjects to Host There are a myriad of open source projects to host on your home server. However, if you are using a pi, the resource intensive ones might be too much for it to handle. To give you an idea, I’ve tried to host Firefly III which is a self budgeting and expense tracker tool and it uses MySQL DB. It gobbled up my poor little pi’s resources to the point that other containers suffered and froze. On the other hand, projects that use more lightweight modules tend to be more easy to maintain. Like Vaultwarden with SQLite.\nDocker Management Interface This one is for ease of use. Portainer works well. It provides an user interface where you can see details about running containers, images etc. You can start/stop/kill/remove them, organize and manage them. You can do these from the terminal but this is more convenient in my opinion.\n$ docker run -d --name=portainer --restart unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:linux-arm64\nI will typically use --restart unless-stopped for most of my containers. I don’t want to manually start them if the server reboots or loses power for some reason.\n\rPortainer Dashboard\n\r\r\rPortainer Details\n\r\rKeeping Your System Up To Date If you are using cloud services, one thing you don’t need to worry about is that the application’s maintanence. The risk of vulnerability is provider’s responsibilty. If you decide to host your own, you need to keep an eye on the version of your apps. Consider a zero-day exploit has been discovered for a library which one of your apps use. The maintainers of the repo quickly and heroically releases a new version. This is nice, except how would you know about these events if you are not constantly skimming the news for your favorite projects. This is not maintanable. We need to find a way to automatically update our container images if there is a new version out there in the hub.\nWatchtower comes to the rescue. I love this project. It periodically checks if there is a newer version the docker hub and downloads and spins up a new instance for you. Then if you want, it emails you what it had done. I omitted the email parameters here, you can check the docs.\n$ docker run -d --name watchtower -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower:arm64v8-latest\nNote: If you have critical apps and want to opt-out from watchtower updates to avoid failures, you can put an extra parameter to your target docker run script like this: --label=com.centurylinklabs.watchtower.enable=false\nManage Your Passwords Until the global password problem is solved with some asymmetric cryptography, you are stuck with your 800 different (I hope!) passwords on every different platform. Best password manager I have used is Bitwarden. More specifically its lightweight open source version Vaultwarden. You can also use Bitwarden freely on the cloud. This is also great on Bitwarden’s part and I appreciate the business decision to do it this way. But for our purposes, we will stick with the self-host option.\nI like that:\n It has nice and easy to use interface. Has browser extension and mobile app (that will connect to your home instance). It is open source. It is actively developed. Works perfect on docker on pi. It is easy to backup. (just back up the sqlite.db file)  \rMmmhh… that password generator…\n\r\rFirst things first, you can’t set this one up from scratch with just one docker command. It MUST have an SSL certificate to work properly. So you have 2 options:\n Create a self-signed certificate.  Use this if you don’t have a domain that will answer the DNS query to get a free certificate from Let’s Encrypt. Create the root CA and sign a certificate with it. You can use OpenSSL. You need to add this root CA to your trusted roots on your client. You see that it starts to get cumbersome if you plan to access from different devices. Good news is that you won’t need to renew the certificate so soon because you choose the dates!   Get an SSL certificate for a subdomain that you own.  In my case, I own okankonur.com. So if I get a wildcard SSL certificate for my domain and just add a DNS record that resolves some subdomain like bitwarden.okankonur.com to my home network IP, I am all set. This DNS record will be public, so I can access this from any device. No need to add it manually. Only thing is, I must renew my certificate every 3 months from Let’s Encrypt.    Assuming you are done with the certificate business and you have your certificate’s public and private key files on your pi.\nRenewing the certificate:\n$ certbot certonly --manual -d *.okankonur.com\nCopy the resulting pem files to target folders, for example /ssl:\n$ cp /etc/letsencrypt/live/okankonur.com/fullchain.pem /etc/ssl/certs/fullchain-okankonur.pem\n$ cp /etc/letsencrypt/live/okankonur.com/privkey.pem /etc/ssl/certs/privkey-okankonur.pem\nWe are ready to start up our Vaultwarden instance with our SSL certificate info.\ndocker run -d --name vaultwarden --restart unless-stopped -v /bw-data:/data -v /etc/ssl/certs:/ssl -e ROCKET_TLS='{certs=\"/ssl/fullchain-okankonur.pem\",key=\"/ssl/privkey-okankonur.pem\"}' -p 443:443 -e ROCKET_PORT=443 vaultwarden/server:latest\nYou can now go to your instance through your subdomain URL and create an account to get started.\nIf you have other passwords exported in a format like .csv or json you can import them to Bitwarden.\nBlock Ads Even Before They Reach Your Home Network Meaning: blacklist the advertisement URLs with your custom internal DNS. How? Pi-hole.\n Default one-line install:  $ curl -sSL https://install.pi-hole.net | bash\nThen you need to go to your WiFi Router’s interface and add a custom DNS IP, which will correspond to your pi which runs the pi-hole. You can find detailed tutorial online.  \rPi-hole Dashboard\n\r\rYour Own Projects Dockerization and deployment of a minimum-dependency and lightweight apps have become very easy. For example you can dockerize your Java Maven Application with Jib easily. You just need to configure your pom.xml and you can get your docker image as .tar file with a mvn package command on your lifecycle. Then you copy that .tar file to your pi (you can use WinSCP as I mentioned). Then a simple $ docker load -i yourimg.tar will load your container and you are ready to run it on your server.\n*Note: If you are using watchtower to update images from docker hub, you would want to add the watchtower exclude label (see Keeping Your System Up To Date) to your docker run script.\nWhat Now? So you have set up a very basic and efficient home server with your raspberry pi. Everyone you know has almost the same functionality with cloud services or browser extensions, was it worth the time you wasted?\nYes.\n","wordCount":"1770","inLanguage":"en","datePublished":"2022-06-02T20:46:30+03:00","dateModified":"2022-06-02T20:46:30+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://okankonur.com/posts/selfhost/"},"publisher":{"@type":"Organization","name":"Okan's","logo":{"@type":"ImageObject","url":"https://okankonur.com/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://okankonur.com/ accesskey=h title="Home (Alt + H)">
<img src=https://okankonur.com/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://okankonur.com/archives/ title=archives>
<span>archives</span>
</a>
</li>
<li>
<a href=https://okankonur.com/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li>
<li>
<a href=https://okankonur.com/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://okankonur.com/tags/ title=tags>
<span>tags</span>
</a>
</li>
<li>
<a href=https://okankonur.com/about/me title=about>
<span>about</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://okankonur.com/>Home</a>&nbsp;»&nbsp;<a href=https://okankonur.com/posts/>Posts</a></div>
<h1 class=post-title>
Hosting Open Source Projects At Home
</h1>
<div class=post-meta><span title="2022-06-02 20:46:30 +0300 +03">June 2, 2022</span>&nbsp;·&nbsp;9 min
</div>
</header>
<div class=post-content><h2 id=table-of-contents>Table of Contents<a hidden class=anchor aria-hidden=true href=#table-of-contents>#</a></h2>
<ul>
<li><a href=#table-of-contents>Table of Contents</a>
<ul>
<li><a href=#why>Why</a></li>
<li><a href=#how>How</a>
<ul>
<li><a href=#booting-up-raspberry-pi>Booting Up Raspberry PI</a></li>
<li><a href=#we-need-to-contain-them>We need to CONTAIN them!</a></li>
</ul>
</li>
<li><a href=#projects-to-host>Projects to Host</a>
<ul>
<li><a href=#docker-management-interface>Docker Management Interface</a></li>
<li><a href=#keeping-your-system-up-to-date>Keeping Your System Up To Date</a></li>
<li><a href=#manage-your-passwords>Manage Your Passwords</a></li>
<li><a href=#block-ads-even-before-they-reach-your-home-network>Block Ads Even Before They Reach Your Home Network</a></li>
<li><a href=#your-own-projects>Your Own Projects</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#what-now>What Now?</a></li>
</ul>
<h3 id=why>Why<a hidden class=anchor aria-hidden=true href=#why>#</a></h3>
<p>So, why would you ever need to host anything at home? We live in the age of cloud computing. You can sign up with any mainstream provider and have all the functionality of the services we are going to talk about, without all the configuration hassle.</p>
<p>There are three main reasons for me.
First and foremost, it is fun. Configuring and setting up a home server that works fluidly without needing much maintanence is satisfying. If this sounds ridiculous to you, other reasons aren&rsquo;t important. It comes down to personal preference. Cloud is OK.</p>
<p>This brings us to the second reason. Where cloud may not be OK.</p>
<p>Privacy. We all know that our data is already spilled out there. No matter how much you try, if you are benefiting from FAANG services, they own and sell your data. It may be an acceptable trade in exchange of the services they provide. I am OK with that. However, if you are not, self hosting is also for you.</p>
<p>Thirdly, there are some projects that help you administer your internal home network.
For example you can set up an intermediary DNS and block ads on all of the devices connected to your WiFi without any browser extension or adblock installment. You can&rsquo;t easily do this with any of the cloud services.</p>
<h3 id=how>How<a hidden class=anchor aria-hidden=true href=#how>#</a></h3>
<p>First thing to get is an old pc which is lying around. Or better, a raspberry pi&mldr; or better, a rpi cluster!</p>
<p>Raspberry PI is the most efficient way to go in my opinion.
It is:</p>
<ul>
<li>cheap</li>
<li>tiny (you can stick it to your wall)</li>
<li>low power usage (consumes 1W on average - I have model 3b)</li>
<li>has everything you need to get started</li>
</ul>
<figure class=align-center>
<img loading=lazy src=/pics/rpi-watt.png#center alt="Power Usage With 6 Containers Running"> <figcaption>
<p>Power Usage With 6 Containers Running</p>
</figcaption>
</figure>
<h4 id=booting-up-raspberry-pi>Booting Up Raspberry PI<a hidden class=anchor aria-hidden=true href=#booting-up-raspberry-pi>#</a></h4>
<ul>
<li>First, flash an OS.
<ul>
<li>Easiest and most compatible is the Raspberry Pi OS.</li>
<li>I recommend 64-bit version because some docker images are only compatible with it.</li>
<li>Find the list <a href=https://www.raspberrypi.com/software/operating-systems/>here</a></li>
<li>I have the desktop version but you don&rsquo;t necessarily need it.</li>
<li>Download and follow the instructions on the <em>Raspberry Pi Imager.</em></li>
<li>SSH and WiFi configuration step is important in the imager. We will connect with SSH.</li>
</ul>
</li>
<li>Connect to your server.
<ul>
<li>If you flashed and set up wifi and ssh properties successfully, you can now connect to you pi from any other pc on your home network.</li>
<li>Find your pi&rsquo;s assigned IP. You can get this info from your router&rsquo;s interface. (e.g: 192.168.1.1 or something like that)</li>
<li>open up your terminal and connect through ssh: <code>ssh pi@&lt;pi ip></code>. For example: <code>ssh pi@192.168.1.105</code></li>
<li>Recommended if you are using Windows on PC: Install <a href=https://winscp.net/eng/download.php>WinSCP</a> for transferring files to your pi. It will come in handy.</li>
</ul>
</li>
</ul>
<h4 id=we-need-to-contain-them>We need to CONTAIN them!<a hidden class=anchor aria-hidden=true href=#we-need-to-contain-them>#</a></h4>
<p>If you are hosting more than one project with different infrastructures, docker saves the day. Best thing about these open source project developers are that they also release their docker images. You don&rsquo;t even need to build the image nowadays. Just downloading from the hub and slapping some parameters makes it ready to go.</p>
<p><code>$ sudo apt-get update && sudo apt-get upgrade</code></p>
<p><code>$ curl -fsSL https://get.docker.com -o get-docker.sh</code></p>
<p><code>$ sudo sh get-docker.sh</code></p>
<p>Now we are ready to download and run some projects which are built for self-hosting!</p>
<p><em>Note: If you are using a pi with 64 bit os, choose <code>linux-arm64</code> among the container image versions.</em></p>
<p>My current running project list is:</p>
<ul>
<li><strong>Portainer</strong>: Manage your docker ecosystem with a web interface. This is a must imho.</li>
<li><strong>Watchtower</strong>: Automatically update your docker images to the latest version from the hub.</li>
<li><strong>Bitwarden</strong>: Best password manager out there.</li>
<li><strong>Pihole</strong>: DNS Ad-Blocker for your home network.</li>
<li><strong>My Side Projects</strong>:
<ul>
<li>Custom Discord bot.</li>
<li>Simple ethereum low gas price e-mail notifier.</li>
</ul>
</li>
</ul>
<p>Let&rsquo;s look into how we can set up most of them.</p>
<h3 id=projects-to-host>Projects to Host<a hidden class=anchor aria-hidden=true href=#projects-to-host>#</a></h3>
<p>There are a myriad of open source projects to host on your home server. However, if you are using a pi, the resource intensive ones might be too much for it to handle. To give you an idea, I&rsquo;ve tried to host <a href=https://www.firefly-iii.org/>Firefly III</a> which is a self budgeting and expense tracker tool and it uses MySQL DB. It gobbled up my poor little pi&rsquo;s resources to the point that other containers suffered and froze. On the other hand, projects that use more lightweight modules tend to be more easy to maintain. Like Vaultwarden with SQLite.</p>
<h4 id=docker-management-interface>Docker Management Interface<a hidden class=anchor aria-hidden=true href=#docker-management-interface>#</a></h4>
<p>This one is for ease of use. <a href=https://hub.docker.com/r/portainer/portainer-ce/tags>Portainer</a> works well. It provides an user interface where you can see details about running containers, images etc. You can start/stop/kill/remove them, organize and manage them. You can do these from the terminal but this is more convenient in my opinion.</p>
<p><code>$ docker run -d --name=portainer --restart unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:linux-arm64</code></p>
<p>I will typically use <code>--restart unless-stopped</code> for most of my containers. I don&rsquo;t want to manually start them if the server reboots or loses power for some reason.</p>
<figure class=align-center>
<img loading=lazy src=/pics/portainer-dash.png#center alt="Portainer Dashboard"> <figcaption>
<p>Portainer Dashboard</p>
</figcaption>
</figure>
<figure class=align-center>
<img loading=lazy src=/pics/portainer-container.png#center alt="Portainer Details"> <figcaption>
<p>Portainer Details</p>
</figcaption>
</figure>
<h4 id=keeping-your-system-up-to-date>Keeping Your System Up To Date<a hidden class=anchor aria-hidden=true href=#keeping-your-system-up-to-date>#</a></h4>
<p>If you are using cloud services, one thing you don&rsquo;t need to worry about is that the application&rsquo;s maintanence. <strong>The risk of vulnerability is provider&rsquo;s responsibilty.</strong> If you decide to host your own, you need to keep an eye on the version of your apps. Consider a zero-day exploit has been discovered for a library which one of your apps use. The maintainers of the repo quickly and heroically releases a new version. This is nice, except how would you know about these events if you are not constantly skimming the news for your favorite projects. This is not maintanable. We need to find a way to automatically update our container images if there is a new version out there in the hub.</p>
<p><a href=https://github.com/containrrr/watchtower>Watchtower</a> comes to the rescue. I love this project. It periodically checks if there is a newer version the docker hub and downloads and spins up a new instance for you. Then if you want, it emails you what it had done. I omitted the email parameters here, you can check the docs.</p>
<p><code>$ docker run -d --name watchtower -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower:arm64v8-latest</code></p>
<p><em>Note: If you have critical apps and want to opt-out from watchtower updates to avoid failures, you can put an extra parameter to your <strong>target</strong> docker run script like this: <code>--label=com.centurylinklabs.watchtower.enable=false</code></em></p>
<h4 id=manage-your-passwords>Manage Your Passwords<a hidden class=anchor aria-hidden=true href=#manage-your-passwords>#</a></h4>
<p>Until the global password problem is solved with some asymmetric cryptography, you are stuck with your 800 different (I hope!) passwords on every different platform.
Best password manager I have used is <a href=https://bitwarden.com/>Bitwarden</a>. More specifically its lightweight open source version <a href=https://github.com/dani-garcia/vaultwarden>Vaultwarden</a>.
You can also use Bitwarden freely on the cloud. This is also great on Bitwarden&rsquo;s part and I appreciate the business decision to do it this way.
But for our purposes, we will stick with the self-host option.</p>
<p>I like that:</p>
<ul>
<li>It has nice and easy to use interface.</li>
<li>Has browser extension and mobile app (that will connect to your home instance).</li>
<li>It is open source.</li>
<li>It is actively developed.</li>
<li>Works perfect on docker on pi.</li>
<li>It is easy to backup. (just back up the sqlite.db file)</li>
</ul>
<figure class=align-center>
<img loading=lazy src=/pics/bitwarden-generator.png#center alt="Mmmhh&amp;hellip; that password generator&amp;hellip;"> <figcaption>
<p>Mmmhh&mldr; that password generator&mldr;</p>
</figcaption>
</figure>
<p>First things first, you can&rsquo;t set this one up from scratch with just one docker command. It MUST have an SSL certificate to work properly.
So you have 2 options:</p>
<ol>
<li>Create a self-signed certificate.
<ul>
<li>Use this if you don&rsquo;t have a domain that will answer the DNS query to get a free certificate from <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a>.</li>
<li>Create the root CA and sign a certificate with it. You can use OpenSSL.</li>
<li>You need to add this root CA to your trusted roots on your client.</li>
<li>You see that it starts to get cumbersome if you plan to access from different devices.</li>
<li>Good news is that you won&rsquo;t need to renew the certificate so soon because you choose the dates!</li>
</ul>
</li>
<li>Get an SSL certificate for a subdomain that you own.
<ul>
<li>In my case, I own okankonur.com. So if I get a wildcard SSL certificate for my domain and just add a DNS record that resolves some subdomain like bitwarden.okankonur.com to my home network IP, I am all set.</li>
<li>This DNS record will be public, so I can access this from any device. No need to add it manually.</li>
<li>Only thing is, I must renew my certificate every 3 months from <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a>.</li>
</ul>
</li>
</ol>
<p>Assuming you are done with the certificate business and you have your certificate&rsquo;s public and private key files on your pi.</p>
<p>Renewing the certificate:</p>
<p><code>$ certbot certonly --manual -d *.okankonur.com</code></p>
<p>Copy the resulting pem files to target folders, for example <code>/ssl</code>:</p>
<p><code>$ cp /etc/letsencrypt/live/okankonur.com/fullchain.pem /etc/ssl/certs/fullchain-okankonur.pem</code></p>
<p><code>$ cp /etc/letsencrypt/live/okankonur.com/privkey.pem /etc/ssl/certs/privkey-okankonur.pem</code></p>
<p>We are ready to start up our Vaultwarden instance with our SSL certificate info.</p>
<p><code>docker run -d --name vaultwarden --restart unless-stopped -v /bw-data:/data -v /etc/ssl/certs:/ssl -e ROCKET_TLS='{certs="/ssl/fullchain-okankonur.pem",key="/ssl/privkey-okankonur.pem"}' -p 443:443 -e ROCKET_PORT=443 vaultwarden/server:latest</code></p>
<p>You can now go to your instance through your subdomain URL and create an account to get started.</p>
<p>If you have other passwords exported in a format like .csv or json you can import them to Bitwarden.</p>
<h4 id=block-ads-even-before-they-reach-your-home-network>Block Ads Even Before They Reach Your Home Network<a hidden class=anchor aria-hidden=true href=#block-ads-even-before-they-reach-your-home-network>#</a></h4>
<p>Meaning: blacklist the advertisement URLs with your custom internal DNS. How? <a href=https://pi-hole.net/>Pi-hole</a>.</p>
<ol>
<li>Default one-line install:</li>
</ol>
<p><code>$ curl -sSL https://install.pi-hole.net | bash</code></p>
<ol start=2>
<li>Then you need to go to your WiFi Router&rsquo;s interface and add a custom DNS IP, which will correspond to your pi which runs the pi-hole. You can find detailed tutorial online.</li>
</ol>
<figure class=align-center>
<img loading=lazy src=/pics/pihole-dash.png#center alt="Pi-hole Dashboard"> <figcaption>
<p>Pi-hole Dashboard</p>
</figcaption>
</figure>
<h4 id=your-own-projects>Your Own Projects<a hidden class=anchor aria-hidden=true href=#your-own-projects>#</a></h4>
<p>Dockerization and deployment of a minimum-dependency and lightweight apps have become very easy. For example you can dockerize your Java Maven Application with <a href=https://github.com/GoogleContainerTools/jib>Jib</a> easily.
You just need to configure your pom.xml and you can get your docker image as .tar file with a <code>mvn package</code> command on your lifecycle.
Then you copy that .tar file to your pi (you can use WinSCP as I mentioned).
Then a simple <code>$ docker load -i yourimg.tar</code> will load your container and you are ready to run it on your server.</p>
<p>*Note: If you are using watchtower to update images from docker hub, you would want to add the watchtower exclude label (see <a href=#keeping-your-system-up-to-date>Keeping Your System Up To Date</a>) to your docker run script.</p>
<h2 id=what-now>What Now?<a hidden class=anchor aria-hidden=true href=#what-now>#</a></h2>
<p>So you have set up a very basic and efficient home server with your raspberry pi. Everyone you know has <em><strong>almost</strong></em> the same functionality with cloud services or browser extensions, was it worth the time you <em>wasted</em>?</p>
<p>Yes.</p>
</div>
<footer class=post-footer>
<nav class=paginav>
<a class=next href=https://okankonur.com/posts/test-post/>
<span class=title>Next Page »</span>
<br>
<span>Test Post</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://okankonur.com/>Okan's</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>